<!DOCTYPE html><html lang=en itemscope itemtype=http://schema.org/TechArticle><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=google-site-verification content=YaLDO6PjDQSpDh7kvHyEvOYPOc4rkERmW5VCftmVp6c><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1"><meta name=theme-color content=#FF9900><meta name=author itemprop=author content="Vitaliy Zasadnyy"><meta name=keywords itemprop=keywords content="blackberry, bug"><meta itemprop=image content=http://v.zasadnyy.com/img/seo/sharing-google-plus.png><meta name=twitter:card content=summary><meta name=twitter:site content=@zasadnyy><meta name=twitter:title content="Cyrillic app name incorrectly encoded during porting Android app to Blackberry &#8226; Vitaliy Zasadnyy"><meta name=twitter:description content="Today I’ll describe bug in the latest version of apk2bar (version 1.5.0) tool provided by Blackberry for converting Android apk apps to bar.


  “I..."><meta name=twitter:image:src content=http://v.zasadnyy.com/img/seo/sharing-twitter.png><meta property=og:title content="Cyrillic app name incorrectly encoded during porting Android app to Blackberry &#8226; Vitaliy Zasadnyy"><meta property=og:site_name content="Vitaliy Zasadnyy"><meta property=og:type content=article><meta property=og:url content=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded><meta property=og:description content="Today I’ll describe bug in the latest version of apk2bar (version 1.5.0) tool provided by Blackberry for converting Android apk apps to bar.


  “I..."><meta property=og:image content=http://v.zasadnyy.com/img/seo/sharing-facebook.png><link rel=canonical itemprop=url href=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded><link rel=alternate type=application/rss+xml title=RSS href=/feed.xml><title>Cyrillic app name incorrectly encoded during porting Android app to Blackberry &#8226; Vitaliy Zasadnyy</title><link rel="shortcut icon" href=http://v.zasadnyy.com/img/favicons/favicon.ico><link rel=apple-touch-icon sizes=152x152 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=144x144 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=120x120 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=114x114 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=76x76 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=72x72 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=60x60 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=57x57 href=http://v.zasadnyy.com/img/favicons/apple-touch-icon-57x57.png><link rel=icon type=image/png href=http://v.zasadnyy.com/img/favicons/favicon-196x196.png><link rel=icon type=image/png href=http://v.zasadnyy.com/img/favicons/favicon-160x160.png><link rel=icon type=image/png href=http://v.zasadnyy.com/img/favicons/favicon-96x96.png><link rel=icon type=image/png href=http://v.zasadnyy.com/img/favicons/favicon-32x32.png><link rel=icon type=image/png href=http://v.zasadnyy.com/img/favicons/favicon-16x16.png><meta name=msapplication-TileColor content=#2b5797><meta name=msapplication-TileImage content=http://v.zasadnyy.com/img/favicons/mstile-144x144.png><meta name=msapplication-config content=http://v.zasadnyy.com/img/favicons/browserconfig.xml><style type=text/css></style><script id=loadcss>!function(e,n){!function(e){"use strict";var n=function(n,t,o){var l,r=e.document,d=r.createElement("link");if(t)l=t;else{var i=(r.body||r.getElementsByTagName("head")[0]).childNodes;l=i[i.length-1]}var a=r.styleSheets;d.rel="stylesheet",d.href=n,d.media="only x",l.parentNode.insertBefore(d,t?l:l.nextSibling);var s=function(e){for(var n=d.href,t=a.length;t--;)if(a[t].href===n)return e();setTimeout(function(){s(e)})};return d.onloadcssdefined=s,s(function(){d.media=o||"all"}),d};"undefined"!=typeof module?module.exports=n:e.loadCSS=n}("undefined"!=typeof global?global:this);for(var t in e)loadCSS(e[t],n)}(["/css/blog.css"],document.getElementById("loadcss"));</script><noscript><link rel="stylesheet" type="text/css" href="/css/blog.css"></noscript><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--></head><body><div class=container><header class=header><a class=logo-header href="/"><img src=/img/logo.svg alt="Vitaliy Zasadnyy" height=100px width=102px></a><nav class=nav><ul><li><a class="nav-link current" href="/">Blog</a></li><li><a class=nav-link href="/talks/">Public Speaking</a></li><li><a class=nav-link href="/projects/">Projects</a></li></ul></nav></header></div><div class="article-header container-fluid"><div class=container><h1 class=article-title itemprop=name>Cyrillic app name incorrectly encoded during porting Android app to Blackberry</h1><div class=row><div class=col-md-7><p class=article-description itemprop=headline></p><meta name=description itemprop=description content="Today I’ll describe bug in the latest version of apk2bar (version 1.5.0) tool provided by Blackberry for converting Android apk apps to bar.


  “I..."></div></div></div></div><div class=container><div class=row><div class="article-meta col-md-5 col-xs-12"><ul><li><span class=name>Date published:</span> <span class=value itemprop=datePublished content=" 2013-01-27 ">January 27, 2013</span></li><li><span class=name>Est. Read Time:</span> <span class=value>4 mins</span></li><li><span class=name>Share with:</span> <span class=value><a href=# onclick="return window.open(&quot;https://plus.google.com/share?url=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded&quot;,&quot;newwindow&quot;,&quot;width=600, height=500&quot;),!1">Google+</a></span> <span>&#8226;</span> <span class=value><a href=# onclick="return window.open(&quot;https://twitter.com/home?status=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded&quot;,&quot;newwindow&quot;,&quot;width=600, height=250&quot;),!1">Twitter</a></span> <span>&#8226;</span> <span class=value><a href=# onclick="return window.open(&quot;https://www.facebook.com/sharer/sharer.php?u=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded&quot;,&quot;newwindow&quot;,&quot;width=600, height=500&quot;),!1">Facebook</a></span></li><li><span class=name>Tags:</span> <span class=value><a class=category href=/blog/tag/blackberry>#blackberry</a>, <a class=category href=/blog/tag/bug>#bug</a></span></li></ul></div><article class="article col-md-9" itemprop=articleBody><p>Today I’ll describe bug in the latest version of <code>apk2bar</code> (version 1.5.0) tool provided by Blackberry for converting Android apk apps to bar.</p><blockquote><p>“If debugging is the process of removing software bugs, then programming must be the process of putting them in.” Edsger Dijkstra</p></blockquote><p>I had a small problem with displaying Cyrillic app name on PlayBook and BB10 simulator. App name was incorrectly encoded from Russian after converting using apk2bar tool. Problem appeared after updating bb eclipse plugin from version 1.3 to 1.5, with plugin v.1.3 it worked just ok (the same issue was with command line tools).</p><p><img src=/img/posts/app-name-incorrectly-encoded/blackberry-10-screenshot.png alt=image></p><p>When I got problems with encoding with bb eclipse plugin, I decided to do the same thing with command line tools.</p><p>After tools setup (sing keys, debug tokens, etc), I’ve tried to repackage my apk file with this command (source apk file was in apk/ folder and destination for bar file was bar/ folder)</p><figure class=code-highlight-figure><div class=code-highlight><pre class=code-highlight-pre><div data-line=1 class="code-highlight-row numbered"><div class=code-highlight-line>./apk2bar apk/ -d bbplaybookdebugtoken.bar -t bar/ -a <span class=s2>"zasadnyy"</span> -cg</div></div></pre></div></figure><p>When I’ve got .bar file, I’ve installed it with command:</p><figure class=code-highlight-figure><div class=code-highlight><pre class=code-highlight-pre><div data-line=1 class="code-highlight-row numbered"><div class=code-highlight-line>/batchbar-deploy bar/ 192.168.1.35 mysecretpass</div></div></pre></div></figure><p>Unfortunately result was unsuccessful, app name was incorrectly encoded again. After first fail, I’ve read documentation a bit more and tried to use <a href=http://developer.blackberry.com/android/documentation/creating_a_custom_manifest_file_2016828_11.htm>approach described on developer.blackberry.com</a>.</p><p>When I unzipped bar file and opened <code>MANIFEST.MS</code>- I’ve found this line:</p><figure class=code-highlight-figure><div class=code-highlight><pre class=code-highlight-pre><div data-line=1 class="code-highlight-row numbered"><div class=code-highlight-line>Application-Name: –ì–µ—Ä–æ–∏</div></div></pre></div></figure><p>According to documentation solution should be quite strait-forward:</p><ol><li>Rename <code>MANIFEST.MS</code> to <code>&lt;you apk name&gt;.mf</code></li><li>Update incorrect properties, in my case I’ve changed line from above to <code>"Application-Name: Герои"</code></li><li>Put edited manifest file in the same folder as <code>&lt;your apk name&gt;.apk</code> and rerun <code>apk2bar</code> tool with <code>-m</code> parameter, e.g.:</li></ol><figure class=code-highlight-figure><div class=code-highlight><pre class=code-highlight-pre><div data-line=1 class="code-highlight-row numbered"><div class=code-highlight-line>./apk2bar apk/ -d bbplaybookdebugtoken.bar -t bar/ -a <span class=s2>"zasadnyy"</span> -m -cg</div></div></pre></div></figure><p>Repackage, deploy, run and ….. and again <strong>FAIL</strong>. Application name was “–ì–µ—Ä–æ–∏”.</p><p>After second fail, I decided to make dirty hack. I’ve edited <code>MANIFEST.MF</code> directly in repackaged bar file (Unzip → edit manifest → zip → change file extension to .bar).</p><p>Deploy updated .bar file to playbook and …. <strong>YEAH</strong>, we’ve got Cyrillic app name!</p><h5 id=conclusion-and-fix>Conclusion and FIX:</h5><ul><li>Looks like in 1.5 release if apk2bar tool manifest encoding is misconfigured (in ver. 1.3 it worked just ok)</li><li>In order to FIX issue: unzip unsigned bar file → edit manifest → zip → change file extension back to .bar</li></ul><hr>Share with: <span class=value><a href=# onclick="return window.open(&quot;https://plus.google.com/share?url=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded&quot;,&quot;newwindow&quot;,&quot;width=600, height=500&quot;),!1">Google+</a></span> <span>&#8226;</span> <span class=value><a href=# onclick="return window.open(&quot;https://twitter.com/home?status=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded&quot;,&quot;newwindow&quot;,&quot;width=600, height=250&quot;),!1">Twitter</a></span> <span>&#8226;</span> <span class=value><a href=# onclick="return window.open(&quot;https://www.facebook.com/sharer/sharer.php?u=http://v.zasadnyy.com/blog/cyrillic-app-name-incorrectly-encoded&quot;,&quot;newwindow&quot;,&quot;width=600, height=500&quot;),!1">Facebook</a></span></article><div class="post-switcher col-md-9"><div class=row><div class="switcher-item col-sm-6"><a href=/blog/android-form-validation-right-way title="Android form validation - the right way"><span class=arrow>←</span><p class=switcher-content>Android form validation - the right way</p></a></div><div class="switcher-item col-sm-6"><a class=text-right href=/blog/abs-maven-eclipse-integration title="Action Bar Sherlock, Maven, Eclipse integration"><p class=switcher-content>Action Bar Sherlock, Maven, Eclipse integration</p><span class=arrow>→</span></a></div></div></div><div class="comments col-md-9"><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname="vzasadnyy";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div><div class="container-fluid footer-container"><footer class="footer container"><div class=row><div class="col-md-6 col-sm-7"><h4 class=hidden-xs>About</h4><div class="author-photo flow-img img-circle" style=background-image:url(/img/photo.jpg)></div><p class=author-about>Hi, my name is Vitaliy. My background includes mobile application and game development, tech leadership and conference organization. Nowadays, I'm leading development of the next generation in-app marketing tools at the Dutch startup <a href=https://getsocial.im target=_blank>GetSocial</a>. I'm a frequent speaker at conferences, an active member of various technical communities and a founder of the <a href=http://lviv.gdg.org.ua target=_blank>Google Developers Group Lviv</a>.</p></div><div class="get-in-touch col-md-4 col-sm-5 col-md-offset-1"><h4 class=hidden-xs>Get in touch</h4><p class=author-social>You can find me on <a href=https://www.linkedin.com/in/zasadnyy target=_blank>LinkedIn</a>, <a href=http://twitter.com/zasadnyy target=_blank>Twitter</a>, <a href=https://www.youtube.com/channel/UCZuD7FqMvpjr_onzMl3MnuQ target=_blank>YouTube</a> and <a href=https://speakerhub.com/user/7163 target=_blank>SpeakerHub</a>. If you want reach me directly, please send an <a href=mailto:vitaliy@zasadnyy.com target=_blank>email</a>.</p><p class=subscribe>Subscribe with <a href=/feed.xml>RSS</a>.</p></div><div class=clearfix></div><div class="license text-center col-md-12"><i>Except as otherwise noted, the content of this page is licensed under the Creative Commons Attribution 3.0 License, and code samples are licensed under the Apache 2.0 License.</i></div></div></footer></div><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-35774352-2","auto"),ga("send","pageview");</script><script type=text/javascript>WebFontConfig={google:{families:["Roboto:500,300:latin"]}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();</script></body></html>